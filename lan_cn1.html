<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillSphere</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="w-full min-h-screen bg-gray-100 p-4">
        <header>
            <div style="display: flex; align-items: center; width: 100%;">
                <div class="logo">
                    <img src="final_logo.png" alt="SkillSphere Logo" class="logo-img" style="margin-right: 5px;">
                    <span style="margin-left: 0; font-weight: bold; font-size: 1.5em;">SkillSphere</span>
                </div>
                <input type="text" placeholder="What skills you want to learn?" class="search-bar" onclick="window.location.href='serch.html'" style="margin-left: 40px;">
                <div class="profile" style="display: flex; align-items: center; gap: 30px; margin-left: 50px;">
                    <span class="user-icon" onclick="window.location.href='notification.html'">ğŸ””</span>
                    <span class="user-icon" onclick="window.location.href='mail.html'">ğŸ“§</span>
                    <span class="user-icon" onclick="window.location.href='fav.html'">â¤ï¸</span>
                    <span class="user-icon" onclick="window.location.href='main.html'">ğŸ </span>
                    <span class="user-icon" onclick="window.location.href='profile.html'">ğŸ‘¤</span>
                </div>
            </div>
        </header>
        <hr style="margin: 20px 0; border: 1px solid #ccc;">
    </div>

    <h2>Chinese Language - Level 1</h2>
    <div id="quizContainer">
        <form id="quizForm">
            <div id="questionContainer"></div>
            <button type="button" id="backButton" onclick="previousQuestion()" class="hidden">Back</button>
            <button type="button" id="nextButton" onclick="nextQuestion()">Next</button>
        </form>
        <p id="result" class="hidden"></p>
        <button id="retakeButton" class="hidden" onclick="resetQuiz()">Retry</button>
        <button id="backToTestPageButton" class="hidden" onclick="window.location.href='test.html'">Back to Test Page</button>
    </div>

    <script>
        const questions = [
            { question: "ä¸‹åˆ—è¯è¯­ä¸­ï¼Œæ„æ€æœ€æ¥è¿‘ â€œé«˜å…´â€ çš„æ˜¯ï¼š", options: ["éš¾è¿‡", "å¼€å¿ƒ", "ç”Ÿæ°”", "æ‚²ä¼¤"], answer: "b" },
            { question: "â€œä»–ä¸€å¬åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œç«‹åˆ»å–œå‡ºæœ›å¤–ã€‚â€<br><br>è¿™å¥è¯ä¸­çš„â€œå–œå‡ºæœ›å¤–â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ", options: ["å–œæ¬¢å‡ºé—¨æ•£æ­¥", "æƒŠè®¶å’Œç”Ÿæ°”", "éå¸¸é«˜å…´ï¼Œå‡ºä¹æ„æ–™", "æ— åŠ¨äºè¡·"], answer: "c" },
            { question: "ä¸‹é¢å“ªä¸ªå¥å­ä½¿ç”¨äº†æ¯”å–»ï¼Ÿ", options: ["ä»–èµ°å¾—å¾ˆå¿«ã€‚", "ä»–åƒçŒè±¹ä¸€æ ·å†²äº†å‡ºå»ã€‚", "ä»–ç”Ÿæ°”åœ°çœ‹ç€æˆ‘ã€‚", "ä»–ä½ç€å¤´ï¼Œä¸€å¥è¯ä¹Ÿä¸è¯´ã€‚"], answer: "b" },
            { question: "ä¸‹åˆ—è¯è¯­ä¸­ï¼Œå“ªä¸€ç»„æ˜¯è¿‘ä¹‰è¯ï¼Ÿ", options: ["é«˜å…´ â€” éš¾è¿‡", "æ˜äº® â€” æ˜æš—", "å‹‡æ•¢ â€” æ— ç•", "å†·æ¸… â€” çƒ­é—¹"], answer: "c" },
            { question: "â€œç”»è›‡æ·»è¶³â€ è¿™ä¸ªæˆè¯­çš„æ„æ€æ˜¯ï¼Ÿ", options: ["æŠŠè›‡ç”»å¾—å¾ˆæ¼‚äº®", "å¤šæ­¤ä¸€ä¸¾ï¼Œåšäº†ä¸å¿…è¦çš„äº‹", "ä¸ä¼šç”»è›‡", "æ·»è¶³ä½¿è›‡æ›´ç”ŸåŠ¨"], answer: "b" },
            { question: "æŒ‰ç…§é¡ºåºå¡«å‡ºä¸‹å¥ï¼š<br>â€œæ¬²ç©·åƒé‡Œç›®ï¼Œ_______ã€‚â€", options: ["æ›´ä¸Šä¸€å±‚æ¥¼", "æ›´ä¸‹ä¸€å±‚æ¥¼", "æ›´é«˜ä¸€å±‚æ¥¼", "æµ®ä¸ŠäºŒå±‚æ¥¼"], answer: "a" },
            { question: "ä¸‹åˆ—å¥å­ä¸­ä½¿ç”¨äº† â€œæ¯”å–»â€ ä¿®è¾æ‰‹æ³•çš„æ˜¯ï¼š", options: ["ä»–é«˜å…´å¾—è·³äº†èµ·æ¥ã€‚", "æ˜Ÿæ˜Ÿçœ¨ç€çœ¼ç›ï¼Œä»¿ä½›åœ¨å’Œæˆ‘è¯´è¯ã€‚", "å¥¹åƒè´è¶ä¸€æ ·è½»ç›ˆåœ°è·³èµ·èˆæ¥ã€‚", "æˆ‘çœŸæ˜¯ç´¯æ­»äº†ï¼"], answer: "c" },
            { question: "ä¸‹åˆ—å¥å­ä¸­ä½¿ç”¨äº† â€œæ‹Ÿäººâ€ ä¿®è¾æ‰‹æ³•çš„æ˜¯ï¼š", options: ["è¿™æœµèŠ±çœŸç¾ã€‚", "æ˜¥é£åƒæ¯äº²çš„æ‰‹ä¸€æ ·è½»æŠšç€å¤§åœ°ã€‚", "å°è‰ä»åœ°ä¸‹é’»å‡ºæ¥ï¼Œå†²æˆ‘ç‚¹å¤´å¾®ç¬‘ã€‚", "ä»–çš„å£°éŸ³åƒæ‰“é›·ä¸€æ ·å“ã€‚"], answer: "c" },
            { question: "â€œä¸æ˜¯ä¸œé£å‹å€’è¥¿é£ï¼Œå°±æ˜¯è¥¿é£å‹å€’ä¸œé£ã€‚â€ è¿ç”¨äº†å“ªç§ä¿®è¾æ‰‹æ³•ï¼Ÿ", options: ["æ’æ¯”", "è®¾é—®", "å¯¹å¶", "åå¤"], answer: "c" },
            { question: "â€œè¿™çœŸæ˜¯ä¸€ä¸ª â€˜ç™½é›ªå´å«Œæ˜¥è‰²æ™šï¼Œæ•…ç©¿åº­æ ‘ä½œé£èŠ±â€™çš„å­£èŠ‚ã€‚â€ â€”â€”è¿ç”¨äº†å¼•ç”¨çš„ä¿®è¾æ‰‹æ³•ã€‚", options: ["å¯¹", "é”™"], answer: "a" },
            { question: "â€œå±±ä¸Šçš„æ ‘æœ¨ä¸€åŠ¨ä¸åŠ¨ï¼Œå¥½åƒç¡ç€äº†ä¸€æ ·ã€‚â€ â€”â€”è¿ç”¨äº†å¤¸å¼ ä¿®è¾æ‰‹æ³•ã€‚", options: ["å¯¹", "é”™"], answer: "b" },
            { question: "é€‰æ‹©æœ€åˆé€‚çš„è¯è¯­å¡«ç©ºï¼š<br>å¥¹çš„ç¬‘å®¹å¦‚åŒé˜³å…‰ä¸€æ ·ï¼Œæ¸©æš–è€Œï¼ˆ ï¼‰çš„ã€‚", options: ["æ˜äº®", "äº²åˆ‡", "ä¸¥è‚ƒ", "å†·æ¼ "], answer: "b" },
            { question: "é€‰æ‹©æœ€é€‚åˆçš„æˆè¯­å¡«ç©ºï¼š<br>è™½ç„¶ä»–åˆæ¥ä¹åˆ°ï¼Œä½†ç»è¿‡ä¸€æ®µæ—¶é—´çš„å­¦ä¹ ï¼Œç»ˆäºèƒ½å¤Ÿåœ¨å·¥ä½œä¸­ï¼ˆ ï¼‰äº†ã€‚", options: ["è¿ç­¹å¸·å¹„", "æ¸¸åˆƒæœ‰ä½™", "é©¬åˆ°æˆåŠŸ", "äº‹åŠåŠŸå€"], answer: "b" },
            { question: "æ‰¾å‡ºå¥ä¸­çš„è¯­ç—…å¹¶ä¿®æ”¹ï¼š<br>â€œè¿™æœ¬ä¹¦çš„å†…å®¹ä¸ä»…æ·±åˆ»ï¼Œè€Œä¸”å†™å¾—ä¹Ÿå¾ˆæœ‰è¶£ã€‚â€", options: ["å¥å­æ²¡æœ‰é—®é¢˜", "â€œå†™å¾—ä¹Ÿå¾ˆæœ‰è¶£â€ ä¸ â€œæ·±åˆ»â€ æ­é…ä¸å½“", "è¯­å¥è¿‡äºå•°å—¦ï¼Œä¿®æ”¹æˆ â€œè¿™æœ¬ä¹¦å†…å®¹æ·±åˆ»åˆæœ‰è¶£â€ æ›´ä¸ºç®€æ´"], answer: "b" },
            { question: "é˜…è¯»ä¸‹é¢çŸ­æ–‡ï¼Œé€‰æ‹©æ­£ç¡®ç­”æ¡ˆï¼š<br>å°ç‹æ¯å¤©æ”¾å­¦åéƒ½ä¼šå»å›¾ä¹¦é¦†è¯»ä¹¦ï¼Œä¸€ç›´ä¿æŒç€è¿™ä¸ªå¥½ä¹ æƒ¯ã€‚è€å¸ˆå‘ç°äº†ï¼Œå¤¸ä»–æ˜¯ä¸ªåˆ»è‹¦çš„å­¦ç”Ÿã€‚<br><br>é—®é¢˜ï¼š å°ç‹çš„è¡Œä¸ºä½“ç°äº†ä»€ä¹ˆå“è´¨ï¼Ÿ", options: ["å‹‡æ•¢", "å–„è‰¯", "åˆ»è‹¦", "è¯šå®"], answer: "c" },
            { question: "è¡¥å…¨è¯—å¥ï¼š<br>â€œæ˜¥çœ ä¸è§‰æ™“ï¼Œ____________ã€‚â€", options: ["å¤„å¤„é—»å•¼é¸Ÿ", "ä¸è§‰å·²æƒŠèµ·", "å¤œæ¥é£é›¨å£°", "ä½•å¤„æ˜¯å½’è·¯"], answer: "a" },
            { question: "ä¸‹åˆ—è¯è¯­ä¸­ï¼Œå“ªä¸ªæ„æ€ä¸ â€œæ§å¿ƒâ€ æœ€ä¸ºæ¥è¿‘ï¼Ÿ", options: ["æ‰‹æ§", "å¿ƒç–¼", "é«˜å…´", "å¿§è™‘"], answer: "d" },
            { question: "ä¸‹åˆ—æˆè¯­ä¸­ï¼Œå“ªä¸€ä¸ªè¡¨ç¤º â€œæ¯«ä¸çŠ¹è±«ï¼Œæœæ–­çš„è¡Œä¸ºâ€ ï¼Ÿ", options: ["æ‹”è‹—åŠ©é•¿", "è¿«ä¸åŠå¾…", "ä¸´å±ä¸æƒ§", "ä¸€å¾€æ— å‰"], answer: "b" },
            { question: "ä¸‹é¢å¥å­å­˜åœ¨è¯­ç—…ï¼Œè¯·é€‰æ‹©æ­£ç¡®çš„ä¿®æ”¹æ–¹æ³•ï¼š<br>â€œæˆ‘ä»¬åº”è¯¥ç§¯æå“åº”å·å¬ï¼Œå‚ä¸åˆ°å„é¡¹æ´»åŠ¨ä¸­å»ã€‚â€", options: ["å¥å­æ²¡æœ‰è¯­ç—…", "åº”è¯¥æ”¹ä¸º â€œæˆ‘ä»¬åº”è¯¥ç§¯æå“åº”å·å¬ï¼Œå‚ä¸å„é¡¹æ´»åŠ¨ã€‚â€", "åº”è¯¥æ”¹ä¸º â€œæˆ‘ä»¬åº”è¯¥ç§¯æå“åº”å·å¬ï¼Œå‚ä¸åˆ°å„æ´»åŠ¨ä¸­å»ã€‚â€"], answer: "b" },
            { question: "ä¸‹é¢å¥å­å‡ºè‡ªã€Šè®ºè¯­ã€‹ï¼Œé€‰æ‹©å…¶æ­£ç¡®å«ä¹‰ï¼š<br>â€œå›å­åŠ¡æœ¬ï¼Œæœ¬ç«‹è€Œé“ç”Ÿã€‚â€", options: ["å›å­è¿½æ±‚æƒåˆ©ï¼ŒåŠªåŠ›å¢åŠ è´¢å¯Œ", "å›å­åº”å½“è‡´åŠ›äºåŸºæœ¬çš„ä¿®å…»ï¼ŒåŸºç¡€æ‰“å¥½ï¼Œæ‰ä¼šå¾—åˆ°å…¶ä»–æˆå°±", "å›å­æ— æ‰€äº‹äº‹ï¼Œå®ˆæœ¬åˆ†å°±å¯ä»¥", "å›å­åº”å½“æ³¨é‡é“å¾·ä¿®å…»ï¼Œä¸å¿…å…³æ³¨å®é™…è¡ŒåŠ¨"], answer: "b" }
        ];

        // Function to shuffle options for each question
        function shuffleOptions() {
            questions.forEach(question => {
            for (let i = question.options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [question.options[i], question.options[j]] = [question.options[j], question.options[i]];
            }
            });
        }

        // Shuffle options before starting the quiz
        shuffleOptions();

        let currentQuestionIndex = 0;
        let score = 0;

        // Shuffle the questions array
        function shuffleQuestions() {
            for (let i = questions.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [questions[i], questions[j]] = [questions[j], questions[i]];
            }
        }
        
        // Shuffle questions before starting the quiz
        shuffleQuestions();

        // Clear progress immediately when the page is loaded
        window.addEventListener('load', () => {
            resetQuiz(); // Clear the quiz progress on page load
        });

        // Add a reminder for the user if they leave the page
        window.addEventListener('beforeunload', (event) => {
            event.preventDefault();
            event.returnValue = 'Are you sure you want to leave? Your progress will not be saved.';
        });

        function loadQuestion() {
        isQuizStarted = true; // Mark quiz as started
        const questionContainer = document.getElementById('questionContainer');
        questionContainer.innerHTML = '';
        const questionData = questions[currentQuestionIndex];
        const questionElement = document.createElement('p');
        questionElement.innerHTML = questionData.question; // Use innerHTML to render <br> tags
        questionContainer.appendChild(questionElement);

        questionData.options.forEach((option, index) => {
            const optionElement = document.createElement('div');
            optionElement.classList.add('option-container');
            optionElement.innerHTML = `
            <input type="radio" name="q${currentQuestionIndex}" value="${String.fromCharCode(97 + index)}" id="q${currentQuestionIndex}_${index}">
            <label for="q${currentQuestionIndex}_${index}">${option}</label>
            `;
            questionContainer.appendChild(optionElement);
        });

        document.getElementById('backButton').classList.toggle('hidden', currentQuestionIndex === 0);
        }

        // Limit the quiz to display only the first 10 questions
        const maxQuestions = 10;
        if (questions.length > maxQuestions) {
            questions.splice(maxQuestions);
        }

        let isQuizStarted = false;

         // Add event listener to warn the user before leaving the page
        window.addEventListener('beforeunload', (event) => {
            if (isQuizStarted) {
                event.preventDefault();
                event.returnValue = 'Are you sure you want to leave? Your progress will be lost.';
            }
        });

        // Clear progress if the user confirms leaving
        window.addEventListener('unload', () => {
            if (isQuizStarted) {
                resetQuiz(); // Clear the quiz progress
            }
        });

        function nextQuestion() {
            const selectedOption = document.querySelector(`input[name="q${currentQuestionIndex}"]:checked`);
            if (!selectedOption) {
                alert('Please select an answer before proceeding.');
                return;
            }

            if (selectedOption.value === questions[currentQuestionIndex].answer) {
                score++;
            }

            currentQuestionIndex++;

            if (currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function showResult() {
            document.getElementById('quizForm').classList.add('hidden');
            document.getElementById('result').textContent = `Your score: ${score} / ${questions.length}`;
            document.getElementById('result').classList.remove('hidden');
            document.getElementById('retakeButton').classList.remove('hidden');
            document.getElementById('backToTestPageButton').classList.remove('hidden');
        }

        // Modify resetQuiz to reshuffle questions on retry
        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            isQuizStarted = false; // Reset quiz state
            shuffleQuestions(); // Reshuffle questions for a new random order
            document.getElementById('quizForm').classList.remove('hidden');
            document.getElementById('result').classList.add('hidden');
            document.getElementById('retakeButton').classList.add('hidden');
            document.getElementById('backToTestPageButton').classList.add('hidden');
            loadQuestion();
        }

        // Initialize the first question
        loadQuestion();
    </script>
</body>
</html>