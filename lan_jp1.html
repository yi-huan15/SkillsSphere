<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillSphere</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="w-full min-h-screen bg-gray-100 p-4">
        <header>
            <div style="display: flex; align-items: center; width: 100%;">
                <div class="logo">
                    <img src="final_logo.png" alt="SkillSphere Logo" class="logo-img" style="margin-right: 5px;">
                    <span style="margin-left: 0; font-weight: bold; font-size: 1.5em;">SkillSphere</span>
                </div>
                <input type="text" placeholder="What skills you want to learn?" class="search-bar" onclick="window.location.href='serch.html'" style="margin-left: 40px;">
                <div class="profile" style="display: flex; align-items: center; gap: 30px; margin-left: 50px;">
                    <span class="user-icon" onclick="window.location.href='notification.html'">ğŸ””</span>
                    <span class="user-icon" onclick="window.location.href='mail.html'">ğŸ“§</span>
                    <span class="user-icon" onclick="window.location.href='fav.html'">â¤ï¸</span>
                    <span class="user-icon" onclick="window.location.href='main.html'">ğŸ </span>
                    <span class="user-icon" onclick="window.location.href='profile.html'">ğŸ‘¤</span>
                </div>
            </div>
        </header>
        <hr style="margin: 20px 0; border: 1px solid #ccc;">
    </div>

    <h2>Japanese Language - Level 1</h2>
    <div id="quizContainer">
        <form id="quizForm">
            <div id="questionContainer"></div>
            <button type="button" id="backButton" onclick="previousQuestion()" class="hidden">Back</button>
            <button type="button" id="nextButton" onclick="nextQuestion()">Next</button>
        </form>
        <p id="result" class="hidden"></p>
        <button id="retakeButton" class="hidden" onclick="resetQuiz()">Retry</button>
        <button id="backToTestPageButton" class="hidden" onclick="window.location.href='test.html'">Back to Test Page</button>
    </div>

    <script>
        const questions = [
            { question: "æ¬¡ã®æ–‡ã®ï¼ˆã€€ï¼‰ã«å…¥ã‚‹æœ€ã‚‚é©åˆ‡ãªè¨€è‘‰ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>Which word best fits in the blank of the following sentence?<br><br>å…ˆç”Ÿã«ï¼ˆã€€ï¼‰ã‹ã‚‰ã€å®¿é¡Œã‚’å¿˜ã‚ŒãŸã“ã¨ã‚’è¨€ãˆãªã‹ã£ãŸã€‚<br>Because I (ã€€) by the teacher, I couldn't tell them that I forgot my homework.", options: ["ãŠã“ã‚‰ã‚Œã¦", "ãŠã“ã‚‰ã‚Œã‚‹", "ãŠã“ã‚‹", "ãŠã“ã£ãŸ"], answer: "b" },
            { question: "ã“ã®æ¼¢å­—ã®èª­ã¿æ–¹ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>What is the correct reading (pronunciation) of the underlined kanji?<br><br>è³ªå•ï¼šã€Œæ˜¨å¤œã¯æ—©ãå¯ã¾ã—ãŸã€‚ã€<br>(Last night I went to bed early.)", options: ["ã•ãã‚ˆã‚‹ (sakuyoru)", "ãã®ã†ã‚ˆã‚‹ (kinou yoru)", "ã•ãã‚„ (sakuya)", "ã›ã‚“ã‚„ (senya)"], answer: "c" },
            { question: "ï¼ˆã€€ï¼‰ã«å…¥ã‚‹ã‚‚ã£ã¨ã‚‚è‡ªç„¶ãªè¡¨ç¾ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>Which of the following best completes the sentence?<br><br>è³ªå•ï¼šå‹é”ãŒç—…æ°—ã§å­¦æ ¡ã‚’ä¼‘ã‚“ã ã®ã§ã€ãŠè¦‹èˆã„ã«ï¼ˆã€€ï¼‰ã€‚<br>Sentence: My friend was sick and didnâ€™t come to school, so I (ã€€) to visit them.", options: ["è¡Œãã¾ã—ãŸ", "è¡Œãã¾ã™", "è¡Œã“ã†", "è¡Œã‘"], answer: "a" },
            { question: "ã“ã®æ–‡ã®æ„å‘³ã«åˆã†è¨€ã„æ›ãˆã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>Which sentence best matches the meaning of this one?<br><br>è³ªå•ï¼šã€Œå½¼ã¯ç´„æŸã‚’å®ˆã‚‹ã©ã“ã‚ã‹ã€é€£çµ¡ã•ãˆã—ã¦ã“ãªã‹ã£ãŸã€‚ã€<br>(Far from keeping his promise, he didnâ€™t even contact me.)", options: ["ç´„æŸã¯å®ˆã‚‰ãªã‹ã£ãŸãŒã€é€£çµ¡ã¯ã‚ã£ãŸ", "ç´„æŸã‚‚å®ˆã‚‰ãªã‹ã£ãŸã—ã€é€£çµ¡ã‚‚ãªã‹ã£ãŸ", "ç´„æŸã‚’å®ˆã£ãŸã‘ã‚Œã©ã€é€£çµ¡ãŒãªã‹ã£ãŸ", "ç´„æŸã‚’å®ˆã‚‰ãªã‹ã£ãŸãŒã€ãã‚Œã¯ä»•æ–¹ãªã‹ã£ãŸ"], answer: "b" },
            { question: "ï¼ˆã€€ï¼‰ã«å…¥ã‚‹æœ€ã‚‚é©åˆ‡ãªèªã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>Choose the most appropriate word to fill in the blank.<br><br>è³ªå•ï¼šã‚ã®ä¿³å„ªã®æ¼”æŠ€ã«ã¯ã€è¦³å®¢ã‚’ï¼ˆã€€ï¼‰åŠ›ãŒã‚ã‚‹ã€‚<br>Sentence: That actor's performance has the power to (ã€€) the audience.", options: ["ã²ã‹ã‚Œã‚‹", "ã²ãã¤ã‘ã‚‹", "ã²ã‹ã›ã‚‹", "ã²ãã—ã‚ã‚‹"], answer: "b" },
            { question: "ã“ã®æ¼¢å­—ã®æ­£ã—ã„èª­ã¿æ–¹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>What is the correct reading of the underlined kanji?<br><br>Sentence:å…¬åœ’ã§å­ã©ã‚‚ãŸã¡ãŒéŠã‚“ã§ã„ã‚‹ã€‚<br>The children are playing in the park.", options: ["ã‚ãã‚“ã§ã„ã‚‹", "ãŠã‚ˆã„ã§ã„ã‚‹", "ã†ãŸã£ã¦ã„ã‚‹", "ã™ã‚“ã§ã„ã‚‹"], answer: "a" },
            { question: "ï¼ˆã€€ï¼‰ã«å…¥ã‚‹ã‚‚ã£ã¨ã‚‚è‡ªç„¶ãªè¨€è‘‰ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>Which word fits most naturally in the blank?<br><br>Sentence:å¿™ã—ã‹ã£ãŸã®ã§ã€å®¿é¡Œã‚’ï¼ˆã€€ï¼‰ã€‚<br>Because I was busy, I (ã€€) my homework.", options: ["ã‚„ã£ãŸ", "ã‚„ã‚‰ãªã‹ã£ãŸ", "ã‚„ã£ã¦ã„ã‚‹", "ã‚„ã‚Œã‚‹"], answer: "b" },
            { question: "ã“ã®æ–‡ã®æ„å‘³ã«ä¸€ç•ªè¿‘ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>Which sentence is closest in meaning?<br><br>Sentence:ç”°ä¸­ã•ã‚“ã¯æ—¥æœ¬ã«æ¥ãŸã°ã‹ã‚Šãªã®ã«ã€æ—¥æœ¬èªãŒã¨ã¦ã‚‚ä¸Šæ‰‹ã§ã™ã€‚<br>Even though Mr. Tanaka just came to Japan, he is very good at Japanese.", options: ["ç”°ä¸­ã•ã‚“ã¯é•·ã„é–“æ—¥æœ¬ã«ä½ã‚“ã§ã„ã‚‹ã€‚", "ç”°ä¸­ã•ã‚“ã¯æ—¥æœ¬èªã‚’å‹‰å¼·ã—ãŸã“ã¨ãŒãªã„ã€‚", "ç”°ä¸­ã•ã‚“ã¯æ—¥æœ¬ã«æ¥ãŸã°ã‹ã‚Šã ã‘ã©ã€æ—¥æœ¬èªãŒã†ã¾ã„ã€‚", "ç”°ä¸­ã•ã‚“ã¯æ—¥æœ¬ã«è¡ŒããŸããªã„ã€‚"], answer: "c" },
            { question: "æ¬¡ã®æ–‡ç« ã‚’èª­ã‚“ã§ã€ï¼ˆã€€ï¼‰ã«å…¥ã‚‹ã‚‚ã£ã¨ã‚‚é©åˆ‡ãªèªã‚’é¸ã³ãªã•ã„ã€‚<br><br>Sentence:æœ€è¿‘ã§ã¯ã€ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã‚’æŒã£ã¦ã„ãªã„äººã®ã»ã†ãŒï¼ˆã€€ï¼‰ã€‚<br>Lately, it's (ã€€) to find people who don't have a smartphone.", options: ["ãµã¤ã†ã§ã™", "ã¾ã‚Œã§ã™", "ã—ã‚‡ã†ã˜ãã§ã™", "ãŸã„ãã¤ã§ã™"], answer: "b" },
            { question: "ï¼ˆã€€ï¼‰ã«å…¥ã‚‹è¨€è‘‰ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>Which word best fits the blank?<br><br>Sentence:é›»è»Šã«ï¼ˆã€€ï¼‰ã¨ãã€è²¡å¸ƒã‚’è½ã¨ã—ã¾ã—ãŸã€‚<br>When I (  ) on the train, I dropped my wallet.", options: ["ä¹—ã£ãŸ", "ä¹—ã£ã¦", "ä¹—ã‚‹", "ä¹—ã‚Š"], answer: "a" },
            { question: "æ¬¡ã®è¨€è‘‰ã®æ„å‘³ã«æœ€ã‚‚è¿‘ã„ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br><br>Which is closest in meaning to the word å·¥å¤« (kufuu)?<br>Word: å·¥å¤«ï¼ˆããµã†ï¼‰", options: ["å•é¡Œã‚’æ”¾ã£ã¦ãŠãã“ã¨", "ä¸Šæ‰‹ã«ã‚„ã‚‹ãŸã‚ã«è€ƒãˆã‚‹ã“ã¨", "é¢å€’ãªã“ã¨ã‚’é¿ã‘ã‚‹ã“ã¨", "èª°ã‹ã«é ¼ã‚‹ã“ã¨"], answer: "b" },
            { question: "æ¬¡ã®æ–‡ã®ï¼ˆã€€ï¼‰ã«å…¥ã‚‹ã‚‚ã£ã¨ã‚‚é©åˆ‡ãªèªå¥ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>Which word is most appropriate to fill in the blank in the following sentence?<br><br>Sentence:æ€¥ãŒãªã‘ã‚Œã°ã€é›»è»Šã«ï¼ˆã€€ï¼‰ã‹ã‚‚ã—ã‚Œãªã„ã€‚<br>If I donâ€™t hurry, I might (ã€€) the train.", options: ["é–“ã«åˆã£ã¦", "é–“ã«åˆã‚ãªã„", "é–“ã«åˆã†", "é–“ã«åˆãˆ"], answer: "b" },
            { question: "ã“ã®ä¸­ã§ã€'ã‚ãã‚Œã‚‹'ã®æ­£ã—ã„ä½¿ã„æ–¹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>Which sentence uses the word 'ã‚ãã‚Œã‚‹' (to be appalled) correctly?", options: ["å½¼ã®å‹‡æ°—ã«ã‚ãã‚ŒãŸã€‚", "å½¼ã®ç„¡è²¬ä»»ã•ã«ã‚ãã‚ŒãŸã€‚", "ç¾ã—ã„æ™¯è‰²ã«ã‚ãã‚ŒãŸã€‚", "æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã«ã‚ãã‚ŒãŸã€‚"], answer: "b" },
            { question: "ã€Œéƒ¨å±‹ã®çª“ã‚’é–‹ã‘ã¦ãã ã•ã„ã€‚ã€ã®ã€Œé–‹ã‘ã¦ã€ã®æ­£ã—ã„èª­ã¿æ–¹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>What is the correct reading of â€œé–‹ã‘ã¦â€ in this sentence:<br>Please open the window in the room.", options: ["ã¨ã‘ã¦", "ã‚ã‘ã¦", "ã²ã‚‰ã‘ã¦", "ã‚ã‚‰ã‚ã‚Œã¦"], answer: "b" },
            { question: "ï¼ˆã€€ï¼‰ã«å…¥ã‚‹ã‚‚ã£ã¨ã‚‚è‡ªç„¶ãªè¡¨ç¾ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br><br>Sentence:è©¦é¨“ã®çµæœãŒæ‚ªã‹ã£ãŸã®ã§ã€å…ˆç”Ÿã«ï¼ˆã€€ï¼‰ã€‚<br>Because my test results were bad, I (ã€€) by the teacher.", options: ["ã—ã‹ã‚‰ã›ãŸ", "ã—ã‹ã‚‰ã‚ŒãŸ", "ã—ã‹ã‚‰ãªã„", "ã—ã‹ã‚‰ã›ã‚‹"], answer: "b" },
            { question: "ã€Œãã®å ´ã—ã®ãã€ã®æ„å‘³ã«æœ€ã‚‚è¿‘ã„ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>What is the closest meaning of ãã®å ´ã—ã®ã?", options: ["é•·ãç¶šãå¯¾ç­–", "ãã®æ™‚ã ã‘ã®å¯¾å¿œ", "ç„¡é§„ãªåŠªåŠ›", "ä¸å¯§ãªæº–å‚™"], answer: "b" },
            { question: "å½¼ã®è©±ã¯ã„ã¤ã‚‚ï¼ˆã€€ï¼‰ã‚ˆã†ã§ã€ä¿¡ã˜ãŒãŸã„ã€‚<br>His stories always sound so (ã€€) that theyâ€™re hard to believe.", options: ["ç¾å®Ÿã®", "ã†ãã¤ããª", "ä½œã‚Šè©±ã®", "å¤§ã’ã•ãª"], answer: "d" },
            { question: "ã€Œæ˜¨æ—¥ã¯å‹é”ã¨åšç‰©é¤¨ã«è¡Œãã¾ã—ãŸã€‚ã€ã®èª­ã¿æ–¹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>What is the correct reading of åšç‰©é¤¨?", options: ["ã¯ãã¶ã¤ã‹ã‚“", "ã°ãã‚‚ã®ã‹ã‚“", "ã¯ãã‚‚ã¤ã‹ã‚“", "ã¯ãã¶ã¤ã‘ã‚“"], answer: "a" },
            { question: "ã€Œã€œã‚ã‘ã§ã¯ãªã„ã€ã®ä½¿ã„æ–¹ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ<br>Which sentence correctly uses â€œã€œã‚ã‘ã§ã¯ãªã„â€ (itâ€™s not thatâ€¦)?", options: ["æ—¥æœ¬èªãŒè©±ã›ãªã„ã‚ã‘ã§ã¯ãªã„ãŒã€ã¾ã è‡ªä¿¡ãŒãªã„ã€‚", "å¯’ã„ã‚ã‘ã§ã¯ãªã„ã®ã§ã€ã‚³ãƒ¼ãƒˆã‚’æŒã£ã¦ã„ãã€‚", "å½¼ã®è©±ã¯ãŠã‚‚ã—ã‚ã„ã‚ã‘ã§ã¯ãªã„ã‹ã‚‚ã€‚", "æ˜¨æ—¥ã¯é›¨ã ã£ãŸã‚ã‘ã ã£ãŸã€‚"], answer: "a" },
            { question: "å¤©æ°—ãŒæ‚ªã‹ã£ãŸï¼ˆã€€ï¼‰ã€è©¦åˆã¯ä¸­æ­¢ã«ãªã£ãŸã€‚<br>Because the weather was bad, the match was canceled.", options: ["ã®ã«", "ã‘ã‚Œã©ã‚‚", "ãŸã‚", "ãªã‚‰"], answer: "c" }
        ];

        // Function to shuffle options for each question
        function shuffleOptions() {
            questions.forEach(question => {
            for (let i = question.options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [question.options[i], question.options[j]] = [question.options[j], question.options[i]];
            }
            });
        }

        // Shuffle options before starting the quiz
        shuffleOptions();

        let currentQuestionIndex = 0;
        let score = 0;

        // Shuffle the questions array
        function shuffleQuestions() {
            for (let i = questions.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [questions[i], questions[j]] = [questions[j], questions[i]];
            }
        }
        
        // Shuffle questions before starting the quiz
        shuffleQuestions();

        // Clear progress immediately when the page is loaded
        window.addEventListener('load', () => {
            resetQuiz(); // Clear the quiz progress on page load
        });

        // Add a reminder for the user if they leave the page
        window.addEventListener('beforeunload', (event) => {
            event.preventDefault();
            event.returnValue = 'Are you sure you want to leave? Your progress will not be saved.';
        });

        function loadQuestion() {
        isQuizStarted = true; // Mark quiz as started
        const questionContainer = document.getElementById('questionContainer');
        questionContainer.innerHTML = '';
        const questionData = questions[currentQuestionIndex];
        const questionElement = document.createElement('p');
        questionElement.textContent = questionData.question;
        questionContainer.appendChild(questionElement);

        questionData.options.forEach((option, index) => {
            const optionElement = document.createElement('div');
            optionElement.classList.add('option-container');
            optionElement.innerHTML = `
            <input type="radio" name="q${currentQuestionIndex}" value="${String.fromCharCode(97 + index)}" id="q${currentQuestionIndex}_${index}">
            <label for="q${currentQuestionIndex}_${index}">${option}</label>
            `;
            questionContainer.appendChild(optionElement);
        });

        document.getElementById('backButton').classList.toggle('hidden', currentQuestionIndex === 0);
        }

        // Limit the quiz to display only the first 10 questions
        const maxQuestions = 10;
        if (questions.length > maxQuestions) {
            questions.splice(maxQuestions);
        }

        let isQuizStarted = false;

         // Add event listener to warn the user before leaving the page
        window.addEventListener('beforeunload', (event) => {
            if (isQuizStarted) {
                event.preventDefault();
                event.returnValue = 'Are you sure you want to leave? Your progress will be lost.';
            }
        });

        // Clear progress if the user confirms leaving
        window.addEventListener('unload', () => {
            if (isQuizStarted) {
                resetQuiz(); // Clear the quiz progress
            }
        });

        function nextQuestion() {
            const selectedOption = document.querySelector(`input[name="q${currentQuestionIndex}"]:checked`);
            if (!selectedOption) {
                alert('Please select an answer before proceeding.');
                return;
            }

            if (selectedOption.value === questions[currentQuestionIndex].answer) {
                score++;
            }

            currentQuestionIndex++;

            if (currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function showResult() {
            document.getElementById('quizForm').classList.add('hidden');
            document.getElementById('result').textContent = `Your score: ${score} / ${questions.length}`;
            document.getElementById('result').classList.remove('hidden');
            document.getElementById('retakeButton').classList.remove('hidden');
            document.getElementById('backToTestPageButton').classList.remove('hidden');
        }

        // Modify resetQuiz to reshuffle questions on retry
        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            isQuizStarted = false; // Reset quiz state
            shuffleQuestions(); // Reshuffle questions for a new random order
            document.getElementById('quizForm').classList.remove('hidden');
            document.getElementById('result').classList.add('hidden');
            document.getElementById('retakeButton').classList.add('hidden');
            document.getElementById('backToTestPageButton').classList.add('hidden');
            loadQuestion();
        }

        // Initialize the first question
        loadQuestion();
    </script>
</body>
</html>