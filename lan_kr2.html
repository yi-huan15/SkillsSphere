<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillSphere</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="w-full min-h-screen bg-gray-100 p-4">
        <header>
            <div style="display: flex; align-items: center; width: 100%;">
                <div class="logo">
                    <img src="final_logo.png" alt="SkillSphere Logo" class="logo-img" style="margin-right: 5px;">
                    <span style="margin-left: 0; font-weight: bold; font-size: 1.5em;">SkillSphere</span>
                </div>
                <input type="text" placeholder="What skills you want to learn?" class="search-bar" onclick="window.location.href='serch.html'" style="margin-left: 40px;">
                <div class="profile" style="display: flex; align-items: center; gap: 30px; margin-left: 50px;">
                    <span class="user-icon" onclick="window.location.href='notification.html'">üîî</span>
                    <span class="user-icon" onclick="window.location.href='mail.html'">üìß</span>
                    <span class="user-icon" onclick="window.location.href='fav.html'">‚ù§Ô∏è</span>
                    <span class="user-icon" onclick="window.location.href='main.html'">üè†</span>
                    <span class="user-icon" onclick="window.location.href='profile.html'">üë§</span>
                </div>
            </div>
        </header>
        <hr style="margin: 20px 0; border: 1px solid #ccc;">
    </div>

    <h2>Korean Language - Level 2</h2>
    <div id="quizContainer">
        <form id="quizForm">
            <div id="questionContainer"></div>
            <button type="button" id="backButton" onclick="previousQuestion()" class="hidden">Back</button>
            <button type="button" id="nextButton" onclick="nextQuestion()">Next</button>
        </form>
        <p id="result" class="hidden"></p>
        <button id="retakeButton" class="hidden" onclick="resetQuiz()">Retry</button>
        <button id="backToTestPageButton" class="hidden" onclick="window.location.href='test.html'">Back to Test Page</button>
    </div>

    <script>
        const questions = [
            { question: "Îã§Ïùå Ï§ë ÌïúÍµ≠Ïñ¥ÏóêÏÑú 'Í∞ú' (gae)Îäî Î¨¥ÏóáÏùÑ ÏÑ∏Îäî Îã®ÏúÑÏù∏Í∞ÄÏöî?", options: ["ÏãúÍ∞Ñ", "ÏÇ¨Îûå", "Ï±Ö", "Î¨ºÍ±¥"], answer: "d" },
            { question: "Which of the following sentences uses the appropriate honorific form and correct word order?", options: ["ÏÑ†ÏÉùÎãòÏùÄ ÌïôÍµêÏóê Îß§Ïùº Í∞ÄÏöî.", "ÏÑ†ÏÉùÎãòÏùÄ ÌïôÍµêÏóê Í∞ÄÏöî Îß§Ïùº.", "ÏÑ†ÏÉùÎãò ÌïôÍµêÏóê Îß§Ïùº Í∞ÄÏöî.", "Îß§Ïùº ÏÑ†ÏÉùÎãòÏùÄ ÌïôÍµêÏóê Í∞ÄÏöî."], answer: "a" },
            { question: "In Korean, the verb stem 'Î∞îÍæ∏Îã§' (to change) is modified into which of the following forms when expressing a future action using the 'Í≤†' suffix?", options: ["Î∞îÍø®Í≤†Ïñ¥Ïöî", "Î∞îÍøîÏöî", "Î∞îÍøÄ Í±∞ÏòàÏöî", "Î∞îÍøîÏöî"], answer: "c" },
            { question: "In a formal setting, if you wanted to ask someone politely to wait for a moment, which of the following would be the most appropriate?", options: ["Ïû†ÍπêÎßå Í∏∞Îã§Î†§ Ï£ºÏÑ∏Ïöî.", "Ïû†ÍπêÎßå Í∏∞Îã§Î†§Ïöî.", "Ïû†ÏãúÎßå Í∏∞Îã§Î¶¨ÏÑ∏Ïöî.", "Ïû†Íπê Í∏∞Îã§Î†§."], answer: "c" },
            { question: "What is the correct use of the 'Í∏∞ ÎïåÎ¨∏Ïóê' (because) structure in a sentence?", options: ["Í∑∏ ÏÇ¨ÎûåÏù¥ Îä¶ÏóàÍ∏∞ ÎïåÎ¨∏Ïóê, Ïö∞Î¶¨Îäî ÏùºÏ∞ç ÏãúÏûëÌñàÏñ¥Ïöî.", "Í∑∏ ÏÇ¨ÎûåÏù¥ Îä¶Ïñ¥ÏÑú, Ïö∞Î¶¨Îäî ÏùºÏ∞ç ÏãúÏûëÌñàÏñ¥Ïöî.", "Í∑∏ ÏÇ¨ÎûåÏù¥ Îä¶ÏùÑ Í±∞ÏòàÏöî Í∏∞ ÎïåÎ¨∏Ïóê, Ïö∞Î¶¨Îäî ÏùºÏ∞ç ÏãúÏûëÌñàÏñ¥Ïöî.", "Í∑∏ ÏÇ¨ÎûåÏù¥ Îä¶Í∏∞ ÎïåÎ¨∏Ïóê, Ïö∞Î¶¨Îäî ÏùºÏ∞ç ÏãúÏûëÌñàÏñ¥Ïöî."], answer: "d" },
            { question: "Which of the following sentences is grammatically incorrect or contains a common mistake in Korean syntax?", options: ["ÎÇòÎäî ÌïôÍµêÏóêÏÑú ÏπúÍµ¨Î•º ÎßåÎÇ¨Ïñ¥Ïöî.", "ÎÇòÎäî ÎèÑÏÑúÍ¥ÄÏóê Ï±ÖÏùÑ ÏùΩÏñ¥Ïöî.", "ÎÇòÎäî Í∑∏ ÏòÅÌôîÎ•º Î¥§Ïñ¥Ïöî.", "ÎÇòÎäî Ïñ¥Ï†ú ÏòÅÌôîÎ•º Î¥§Ïñ¥Ïöî."], answer: "b" },
            { question: "In Korean, the verb stem 'Í∞ÄÎã§' (to go) can take different honorific forms depending on the context. Which of the following sentences uses the correct honorific form of 'to go' when referring to an elder or superior?", options: ["ÏÑ†ÏÉùÎãòÏù¥ Í∞ÄÏÑ∏Ïöî.", "ÏÑ†ÏÉùÎãòÏù¥ Í∞ÄÏöî.", "ÏÑ†ÏÉùÎãòÏù¥ Í∞ÄÏã≠ÏãúÏò§.", "ÏÑ†ÏÉùÎãòÏù¥ Í∞ëÎãàÎã§."], answer: "a" },
            { question: "Which of the following sentences correctly uses the conditional form with 'Î©¥'?", options: ["ÏãúÍ∞ÑÏù¥ ÏûàÏúºÎ©¥, ÏòÅÌôîÎ•º Î¥êÏöî.", "ÏãúÍ∞ÑÏù¥ ÏûàÏúºÎ©¥, ÏòÅÌôîÎ•º Î¥§Ïñ¥Ïöî.", "ÏãúÍ∞ÑÏù¥ ÏûàÏúºÎ©¥, ÏòÅÌôîÎ•º Î¥êÏöî?", "ÏãúÍ∞ÑÏù¥ ÏûàÏúºÎ©¥, ÏòÅÌôîÎ•º Î≥¥Í≥† Ïã∂Ïñ¥Ïöî."], answer: "a" },
            { question: "Which of the following sentences correctly uses the '„Ñ¥/ÏùÄ' or 'Îäî' particle to modify a noun?", options: ["Ïù¥ Ï±ÖÏù¥ Ïû¨Î∞åÏñ¥Ïöî.", "Ïù¥ Ï±ÖÏùÄ Ïû¨ÎØ∏ÏûàÏñ¥Ïöî.", "Ïû¨ÎØ∏ÏûàÎäî Ïù¥ Ï±ÖÏù¥ÏóêÏöî.", "Ïù¥ Ïû¨ÎØ∏ÏûàÎäî Ï±ÖÏù¥ÏóêÏöî."], answer: "c" },
            { question: "Which of the following phrases correctly uses the 'ÏóêÏÑú' and 'ÍπåÏßÄ' particles to express a range of time or location?", options: ["ÏÑúÏö∏ÏóêÏÑú Î∂ÄÏÇ∞ÍπåÏßÄ Í±∏Ïñ¥Í∞îÏñ¥Ïöî.", "ÏÑúÏö∏Ïóê Î∂ÄÏÇ∞ÍπåÏßÄ Í±∏Ïñ¥Í∞îÏñ¥Ïöî.", "ÏÑúÏö∏ÍπåÏßÄ Î∂ÄÏÇ∞ÏóêÏÑú Í±∏Ïñ¥Í∞îÏñ¥Ïöî.", "ÏÑúÏö∏ÏóêÏÑú Î∂ÄÏÇ∞Ïóê Í±∏Ïñ¥Í∞îÏñ¥Ïöî."], answer: "a" },
            { question: "In formal speech, which of the following sentences correctly expresses a request using the polite form 'Ï£ºÏÑ∏Ïöî'?", options: ["Î¨ºÏùÑ Ï£ºÏÑ∏Ïöî.", "Î¨º Ï£ºÏÑ∏Ïöî.", "Î¨ºÏùÑ Ï£ºÏÑ∏ÏöîÏöî.", "Î¨º Ï£ºÏÑ∏ÏöîÏöî."], answer: "a" },
            { question: "Which of the following sentences is grammatically correct and conveys the meaning 'I have never been to Korea'?", options: ["ÎÇòÎäî ÌïúÍµ≠Ïóê Í∞ÄÎ≥∏ Ï†ÅÏù¥ ÏóÜÏñ¥Ïöî.", "ÎÇòÎäî ÌïúÍµ≠Ïóê Í∞ÄÎ≥∏ Ï†ÅÏù¥ ÏóÜÏñ¥ÏöîÏöî.", "ÎÇòÎäî ÌïúÍµ≠Ïóê Í∞ÄÎ¥§ÏßÄ ÏïäÏïÑÏöî.", "ÎÇòÎäî ÌïúÍµ≠Ïóê Í∞ÄÎ≥∏ ÏùºÏù¥ ÏóÜÏñ¥Ïöî."], answer: "a" },
            { question: "Which of the following sentences correctly uses the passive form of the verb 'Î≥¥Îã§' (to see)?", options: ["ÏòÅÌôîÎäî ÎÇ¥Í∞Ä Î¥êÏöî.", "ÏòÅÌôîÎäî ÎÇ¥Í∞Ä Î¥§Ïñ¥Ïöî.", "ÏòÅÌôîÎäî ÎÇ¥Í∞Ä Î¥êÏ†∏Ïöî.", "ÏòÅÌôîÎäî ÎÇ¥Í∞Ä Î≥¥ÏòÄÏñ¥Ïöî."], answer: "d" },
            { question: "Which of the following sentences expresses the meaning 'Even if it rains, I will go' using the conditional 'ÏïÑ/Ïñ¥ÎèÑ'?", options: ["ÎπÑÍ∞Ä Ïò§Î©¥, Ï†ÄÎäî Í∞à Í±∞ÏòàÏöî.", "ÎπÑÍ∞Ä Ïò§Í∏∞ÎèÑ ÌïòÎãàÍπå, Ï†ÄÎäî Í∞à Í±∞ÏòàÏöî.", "ÎπÑÍ∞Ä Ïò§ÎçîÎùºÎèÑ, Ï†ÄÎäî Í∞à Í±∞ÏòàÏöî.", "ÎπÑÍ∞Ä Ïò§Î©¥, Ï†ÄÎäî Í∞ÄÏöî."], answer: "c" },
            { question: "Which of the following sentences uses the appropriate conjunction to express contrast?", options: ["Í∑∏ ÏÇ¨ÎûåÏùÄ ÏπúÏ†àÌïòÏßÄÎßå, ÎÇòÎäî Í∑∏Î•º Ï¢ãÏïÑÌïòÏßÄ ÏïäÏïÑÏöî.", "Í∑∏ ÏÇ¨ÎûåÏùÄ ÏπúÏ†àÌï¥ÏÑú, ÎÇòÎäî Í∑∏Î•º Ï¢ãÏïÑÌïòÏßÄ ÏïäÏïÑÏöî.", "Í∑∏ ÏÇ¨ÎûåÏùÄ ÏπúÏ†àÌïòÍ≥†, ÎÇòÎäî Í∑∏Î•º Ï¢ãÏïÑÌïòÏßÄ ÏïäÏïÑÏöî.", "Í∑∏ ÏÇ¨ÎûåÏùÄ ÏπúÏ†àÌïòÏßÄÎßå, ÎÇòÎäî Í∑∏Î•º Ï¢ãÏïÑÌïòÏßÄ ÏïäÏäµÎãàÎã§."], answer: "a" },
            { question: "What does the suffix '-Í≥† ÎÇòÏÑú' mean in Korean?", options: ["After doing something", "Before doing something", "Because of something", "While doing something"], answer: "a" },
            { question: "Which of the following sentences uses the appropriate form to indicate 'I should go to bed early'?", options: ["ÎÇòÎäî ÏùºÏ∞ç ÏûêÏïº ÎèºÏöî.", "ÎÇòÎäî ÏùºÏ∞ç ÏûêÍ≥† Ïã∂Ïñ¥Ïöî.", "ÎÇòÎäî ÏùºÏ∞ç ÏûêÏöî.", "ÎÇòÎäî ÏùºÏ∞ç ÏûêÏïº Ìï¥Ïöî."], answer: "a" },
            { question: "Which of the following sentences correctly uses the 'Îäî Í≤É' construction to express 'I like reading books'?", options: ["ÎÇòÎäî Ï±ÖÏùÑ ÏùΩÎäî Í≤ÉÏùÑ Ï¢ãÏïÑÌï¥Ïöî.", "ÎÇòÎäî Ï±ÖÏùÑ ÏùΩÎäî Í≤ÉÏùÑ Ï¢ãÏïÑÌï¥ÏöîÏöî.", "ÎÇòÎäî Ï±ÖÏùÑ ÏùΩÏùÑ Í≤ÉÏùÑ Ï¢ãÏïÑÌï¥Ïöî.", "ÎÇòÎäî Ï±ÖÏùÑ ÏùΩÍ≥† ÏûàÎäî Í≤ÉÏùÑ Ï¢ãÏïÑÌï¥Ïöî."], answer: "a" },
            { question: "Which of the following sentences uses the 'Í≤å ÎêòÎã§' construction to express 'I came to like it'?", options: ["ÎÇòÎäî Í∑∏Í≤ÉÏùÑ Ï¢ãÏïÑÌï¥Ïöî.", "ÎÇòÎäî Í∑∏Í≤ÉÏùÑ Ï¢ãÏïÑÌïòÍ≤å ÎèºÏöî.", "ÎÇòÎäî Í∑∏Í≤ÉÏùÑ Ï¢ãÏïÑÌïòÍ≤å Ìï¥Ïöî.", "ÎÇòÎäî Í∑∏Í≤ÉÏùÑ Ï¢ãÏïÑÌï† Í±∞ÏòàÏöî."], answer: "b" },
            { question: "Which of the following sentences uses the correct form of the verb 'Í∞ÄÎã§' (to go) to express 'I will go to the store'?", options: ["ÎÇòÎäî Í∞ÄÍ≤åÏóê Í∞à Í±∞ÏòàÏöî.", "ÎÇòÎäî Í∞ÄÍ≤åÏóê Í∞ÄÎäî Í±∞ÏòàÏöî.", "ÎÇòÎäî Í∞ÄÍ≤åÏóê Í∞îÏñ¥Ïöî.", "ÎÇòÎäî Í∞ÄÍ≤åÏóê Í∞ÄÍ≥† ÏûàÏñ¥Ïöî."], answer: "a" }
        ];
        // Function to shuffle options for each question
        function shuffleOptions() {
            questions.forEach(question => {
            for (let i = question.options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [question.options[i], question.options[j]] = [question.options[j], question.options[i]];
            }
            });
        }

        // Shuffle options before starting the quiz
        shuffleOptions();

        let currentQuestionIndex = 0;
        let score = 0;

        // Shuffle the questions array
        function shuffleQuestions() {
            for (let i = questions.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [questions[i], questions[j]] = [questions[j], questions[i]];
            }
        }
        
        // Shuffle questions before starting the quiz
        shuffleQuestions();

        // Clear progress immediately when the page is loaded
        window.addEventListener('load', () => {
            resetQuiz(); // Clear the quiz progress on page load
        });

        // Add a reminder for the user if they leave the page
        window.addEventListener('beforeunload', (event) => {
            event.preventDefault();
            event.returnValue = 'Are you sure you want to leave? Your progress will not be saved.';
        });

        function loadQuestion() {
        isQuizStarted = true; // Mark quiz as started
        const questionContainer = document.getElementById('questionContainer');
        questionContainer.innerHTML = '';
        const questionData = questions[currentQuestionIndex];
        const questionElement = document.createElement('p');
        questionElement.textContent = questionData.question;
        questionContainer.appendChild(questionElement);

        questionData.options.forEach((option, index) => {
            const optionElement = document.createElement('div');
            optionElement.classList.add('option-container');
            optionElement.innerHTML = `
            <input type="radio" name="q${currentQuestionIndex}" value="${String.fromCharCode(97 + index)}" id="q${currentQuestionIndex}_${index}">
            <label for="q${currentQuestionIndex}_${index}">${option}</label>
            `;
            questionContainer.appendChild(optionElement);
        });

        document.getElementById('backButton').classList.toggle('hidden', currentQuestionIndex === 0);
        }

        // Limit the quiz to display only the first 10 questions
        const maxQuestions = 10;
        if (questions.length > maxQuestions) {
            questions.splice(maxQuestions);
        }

        let isQuizStarted = false;

         // Add event listener to warn the user before leaving the page
        window.addEventListener('beforeunload', (event) => {
            if (isQuizStarted) {
                event.preventDefault();
                event.returnValue = 'Are you sure you want to leave? Your progress will be lost.';
            }
        });

        // Clear progress if the user confirms leaving
        window.addEventListener('unload', () => {
            if (isQuizStarted) {
                resetQuiz(); // Clear the quiz progress
            }
        });

        function nextQuestion() {
            const selectedOption = document.querySelector(`input[name="q${currentQuestionIndex}"]:checked`);
            if (!selectedOption) {
                alert('Please select an answer before proceeding.');
                return;
            }

            if (selectedOption.value === questions[currentQuestionIndex].answer) {
                score++;
            }

            currentQuestionIndex++;

            if (currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function showResult() {
            document.getElementById('quizForm').classList.add('hidden');
            document.getElementById('result').textContent = `Your score: ${score} / ${questions.length}`;
            document.getElementById('result').classList.remove('hidden');
            document.getElementById('retakeButton').classList.remove('hidden');
            document.getElementById('backToTestPageButton').classList.remove('hidden');
        }

        // Modify resetQuiz to reshuffle questions on retry
        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            isQuizStarted = false; // Reset quiz state
            shuffleQuestions(); // Reshuffle questions for a new random order
            document.getElementById('quizForm').classList.remove('hidden');
            document.getElementById('result').classList.add('hidden');
            document.getElementById('retakeButton').classList.add('hidden');
            document.getElementById('backToTestPageButton').classList.add('hidden');
            loadQuestion();
        }

        // Initialize the first question
        loadQuestion();
    </script>
</body>
</html>