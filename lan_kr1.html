<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillSphere</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="w-full min-h-screen bg-gray-100 p-4">
        <header>
            <div style="display: flex; align-items: center; width: 100%;">
                <div class="logo">
                    <img src="final_logo.png" alt="SkillSphere Logo" class="logo-img" style="margin-right: 5px;">
                    <span style="margin-left: 0; font-weight: bold; font-size: 1.5em;">SkillSphere</span>
                </div>
                <input type="text" placeholder="What skills you want to learn?" class="search-bar" onclick="window.location.href='serch.html'" style="margin-left: 40px;">
                <div class="profile" style="display: flex; align-items: center; gap: 30px; margin-left: 50px;">
                    <span class="user-icon" onclick="window.location.href='notification.html'">ğŸ””</span>
                    <span class="user-icon" onclick="window.location.href='mail.html'">ğŸ“§</span>
                    <span class="user-icon" onclick="window.location.href='fav.html'">â¤ï¸</span>
                    <span class="user-icon" onclick="window.location.href='main.html'">ğŸ </span>
                    <span class="user-icon" onclick="window.location.href='profile.html'">ğŸ‘¤</span>
                </div>
            </div>
        </header>
        <hr style="margin: 20px 0; border: 1px solid #ccc;">
    </div>

    <h2>Korean Language - Level 1</h2>
    <div id="quizContainer">
        <form id="quizForm">
            <div id="questionContainer"></div>
            <button type="button" id="backButton" onclick="previousQuestion()" class="hidden">Back</button>
            <button type="button" id="nextButton" onclick="nextQuestion()">Next</button>
        </form>
        <p id="result" class="hidden"></p>
        <button id="retakeButton" class="hidden" onclick="resetQuiz()">Retry</button>
        <button id="backToTestPageButton" class="hidden" onclick="window.location.href='test.html'">Back to Test Page</button>
    </div>

    <script>
        const questions = [
            { question: "ë‹¤ìŒ ì¤‘ 'ê°ì‚¬í•©ë‹ˆë‹¤'ì˜ ì •í™•í•œ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì¸ê°€ìš”?<br>Which of the following is the correct Korean expression for 'thank you'?", options: ["ê³ ë§ˆì›Œìš” (gomawoyo)", "ê°ì‚¬í•©ë‹ˆë‹¤ (gamsahamnida)", "ë¯¸ì•ˆí•´ìš” (mianhaeyo)", "ì‚¬ë‘í•´ìš” (salanghaeyo)"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ 'ì˜ ì§€ë‚´ì„¸ìš”'ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>Which of the following is the correct Korean expression for 'How are you'?", options: ["ì˜ ì§€ë‚´ìš”? (jal jinaeyo?)", "ë­ í•´ìš”? (mwo haeyo?)", "ì–´ë”” ê°€ìš”? (eodi gayo?)", "ì–¸ì œ ê°€ìš”? (eonje gayo?)"], answer: "a" },
            { question: "'ê³ ë§™ìŠµë‹ˆë‹¤' (gomapseumnida)ëŠ” ë¬´ì—‡ì„ ì˜ë¯¸í•˜ë‚˜ìš”?<br>What does 'ê³ ë§™ìŠµë‹ˆë‹¤' (gomapseumnida) means?", options: ["ì•ˆë…•í•˜ì„¸ìš” (annyeonghaseyo)", "ì£„ì†¡í•©ë‹ˆë‹¤ (joesonghabnida)", "ê°ì‚¬í•©ë‹ˆë‹¤ (gamsahabnida)", "ì•ˆë…•íˆ ê°€ì„¸ìš” (annyeonghi gaseyo)"], answer: "c" },
            { question: "ë‹¤ìŒ ì¤‘ 'ì´í•´í•©ë‹ˆë‹¤'ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>Which of the following is the correct Korean expression for 'I understand'?", options: ["ì´í•´í•˜ì§€ ëª»í•´ìš” (ihaehaji moshaeyo)", "ì´í•´í•´ìš” (ihaehaeyo)", "ë„ì™€ì£¼ì„¸ìš” (dowajuseyo)", "ë°˜ê°‘ìŠµë‹ˆë‹¤ (bangabseubnida)"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ 'ì €ëŠ” í•™ìƒì…ë‹ˆë‹¤'ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>Which of the following is the correct Korean expression for 'I am a student'?", options: ["ì €ëŠ” ì„ ìƒë‹˜ì´ì—ìš” (jeoneun seonsaengnim-ieyo)", "ì €ëŠ” í•™ìƒì´ì—ìš” (jeoneun hagsaeng-ieyo)", "ë„ˆëŠ” í•™ìƒì´ì—ìš” (neoneun hagsaeng-ieyo)", "ì €ëŠ” ì˜ì‚¬ì˜ˆìš” (jeoneun uisayeyo)"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ 'ì‚¬ë‘í•´'ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>Which of the following is the correct Korean expression for 'I love you'?", options: ["ë¯¸ì•ˆí•´ìš” (mianhaeyo)", "ì‚¬ë‘í•´ìš” (salanghaeyo)", "ê°ì‚¬í•©ë‹ˆë‹¤ (gamsahabnida)", "ë°˜ê°€ì›Œìš” (bangawoyo)"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ 'í•™êµ'ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>Which of the following is the correct Korean expression for 'School'?", options: ["ë³‘ì› (byeong-won)", "ìƒì  (sangjeom)", "í•™êµ (haggyo)", "íšŒì‚¬ (hoesa)"], answer: "c" },
            { question: "'ë¯¸ì•ˆí•´ìš”' (mianhaeyo)ì˜ ì˜ë¯¸ëŠ” ë¬´ì—‡ì¸ê°€ìš”?<br>What does 'ë¯¸ì•ˆí•´ìš”' (mianhaeyo) mean?", options: ["ê°ì‚¬í•©ë‹ˆë‹¤ gamsahabnida", "ì£„ì†¡í•©ë‹ˆë‹¤ joesonghabnida", "ì•ˆë…•íˆ ê°€ì„¸ìš” annyeonghi gaseyo", "ì•ˆë…•í•˜ì„¸ìš” annyeonghaseyo"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ 'ì¹œêµ¬'ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>Which of the following is the correct Korean expression for 'friend'?", options: ["ì„ ìƒë‹˜ seonsaengnim", "ì¹œêµ¬ chingu", "í•™ìƒ hagsaeng", "ë¶€ëª¨ë‹˜ bumonim"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ 'ì–´ë””ì— ê³„ì‹­ë‹ˆê¹Œ'ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>Which of the following is the correct Korean expression for 'Where are you'?", options: ["ëª‡ ì‹œì—ìš”? myeoch sieyo?", "ì–´ë””ì—ìš”? eodieyo?", "ì˜ ì§€ë‚´ìš”? jal jinaeyo?", "ì–¸ì œì—ìš”? eonjeeyo?"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ 'ìŒì‹'ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>Which of the following is the correct Korean expression for 'Food'?", options: ["ë¬¼ mul", "ìŒì‹ eumsig", "ì±… chaeg", "ì˜í™” yeonghwa"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ 'ì¢‹ë‹¤'ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>Which of the following is the correct Korean expression for 'It's good'?", options: ["ì¢‹ì•„í•˜ì§€ ì•Šì•„ìš”", "ì‚¬ë‘í•´ìš”", "ì¢‹ì•„ìš”", "ë‚˜ë¹ ìš”"], answer: "c" },
            { question: "ë‹¤ìŒ ì¤‘ í•œêµ­ì–´ì—ì„œ 'ë¨¹ë‹¤'ì˜ ì •ì¤‘í•œ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>What is the polite form of 'to eat' in Korean?", options: ["ë§ˆì…”ìš” masyeoyo", "ì¼ì–´ìš” il-eoyo", "ììš” jayo", "ë¨¹ì–´ìš” meog-eoyo"], answer: "d" },
            { question: "ë‹¤ìŒ ì¤‘ 'ìŒ€'ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ í•œêµ­ì–´ í‘œí˜„ì€ ë¬´ì—‡ì…ë‹ˆê¹Œ?<br>Which of the following is the correct Korean expression for 'Rice'?", options: ["êµ­ gug", "ë°¥/ì‹ì‚¬  bab/sigsa", "ê³¼ì¼ gwail", "ìŒë£Œìˆ˜ eumlyosu"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ ë¬¸ë²•ì ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ë¬¸ì¥ì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ë‚˜ëŠ” í•™êµì— ê°€ìš” ë§¤ì¼.", "ë§¤ì¼ ë‚˜ëŠ” í•™êµì— ê°€ìš”.", "ë‚˜ëŠ” ë§¤ì¼ í•™êµì— ê°€ìš”.", "í•™êµì— ê°€ìš” ë‚˜ëŠ” ë§¤ì¼."], answer: "c" },
            { question: "'ì €ë„ ê°€ê³  ì‹¶ì–´ìš”' (jeodo gago sipeoyo)ì—ì„œ 'ë„' (do)ì˜ ì˜ë¯¸ëŠ” ë¬´ì—‡ì¸ê°€ìš”?", options: ["ë‚˜", "ë„/ë˜", "ê·¸ë¦¬ê³ ", "ê·¸ëŸ¬ë‚˜"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ 'í•˜ì‹­ë‹ˆë‹¤' (hasimnida) í˜•íƒœë¡œ ëœ ë™ì‚¬ëŠ” ë¬´ì—‡ì¸ê°€ìš”?", options: ["í•˜ë‹¤", "ê°€ë‹¤", "ë¨¹ë‹¤", "ì˜¤ë‹¤"], answer: "a" },
            { question: "'ê·¸ëŸ¼' (geureom)ì˜ ëœ»ì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ë§ì•„ìš”", "ê·¸ëŸ¬ë©´", "ì™œëƒí•˜ë©´", "ê·¸ëŸ¬ë‚˜"], answer: "b" },
            { question: "'ì„/ë¥¼' (eul/reul)ì˜ ì˜¬ë°”ë¥¸ ìš©ë²•ì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ì£¼ê²© ì¡°ì‚¬", "ëª©ì ê²© ì¡°ì‚¬", "ì¥ì†Œ ì¡°ì‚¬", "ì‹œê°„ ì¡°ì‚¬"], answer: "b" },
            { question: "ë‹¤ìŒ ì¤‘ 'ë™ì‚¬ ì–´ê°„ + ê³  ì‹¶ë‹¤' (verb stem + go sipda) êµ¬ì¡°ê°€ í¬í•¨ëœ ë¬¸ì¥ì€ ë¬´ì—‡ì¸ê°€ìš”?", options: ["ë‚˜ëŠ” ì±…ì„ ì½ê³  ì‹¶ì–´ìš”.", "ë‚˜ëŠ” ì±…ì„ ì½ì–´ìš”.", "ë‚˜ëŠ” ì±…ì„ ì½ê³  ìˆì–´ìš”.", "ë‚˜ëŠ” ì±…ì„ ì½ìŠµë‹ˆë‹¤."], answer: "a" }
        ];
        // Function to shuffle options for each question
        function shuffleOptions() {
            questions.forEach(question => {
            for (let i = question.options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [question.options[i], question.options[j]] = [question.options[j], question.options[i]];
            }
            });
        }

        // Shuffle options before starting the quiz
        shuffleOptions();

        let currentQuestionIndex = 0;
        let score = 0;

        // Shuffle the questions array
        function shuffleQuestions() {
            for (let i = questions.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [questions[i], questions[j]] = [questions[j], questions[i]];
            }
        }
        
        // Shuffle questions before starting the quiz
        shuffleQuestions();

        // Clear progress immediately when the page is loaded
        window.addEventListener('load', () => {
            resetQuiz(); // Clear the quiz progress on page load
        });

        // Add a reminder for the user if they leave the page
        window.addEventListener('beforeunload', (event) => {
            event.preventDefault();
            event.returnValue = 'Are you sure you want to leave? Your progress will not be saved.';
        });

        function loadQuestion() {
        isQuizStarted = true; // Mark quiz as started
        const questionContainer = document.getElementById('questionContainer');
        questionContainer.innerHTML = '';
        const questionData = questions[currentQuestionIndex];
        const questionElement = document.createElement('p');
        questionElement.textContent = questionData.question;
        questionContainer.appendChild(questionElement);

        questionData.options.forEach((option, index) => {
            const optionElement = document.createElement('div');
            optionElement.classList.add('option-container');
            optionElement.innerHTML = `
            <input type="radio" name="q${currentQuestionIndex}" value="${String.fromCharCode(97 + index)}" id="q${currentQuestionIndex}_${index}">
            <label for="q${currentQuestionIndex}_${index}">${option}</label>
            `;
            questionContainer.appendChild(optionElement);
        });

        document.getElementById('backButton').classList.toggle('hidden', currentQuestionIndex === 0);
        }

        // Limit the quiz to display only the first 10 questions
        const maxQuestions = 10;
        if (questions.length > maxQuestions) {
            questions.splice(maxQuestions);
        }

        let isQuizStarted = false;

         // Add event listener to warn the user before leaving the page
        window.addEventListener('beforeunload', (event) => {
            if (isQuizStarted) {
                event.preventDefault();
                event.returnValue = 'Are you sure you want to leave? Your progress will be lost.';
            }
        });

        // Clear progress if the user confirms leaving
        window.addEventListener('unload', () => {
            if (isQuizStarted) {
                resetQuiz(); // Clear the quiz progress
            }
        });

        function nextQuestion() {
            const selectedOption = document.querySelector(`input[name="q${currentQuestionIndex}"]:checked`);
            if (!selectedOption) {
                alert('Please select an answer before proceeding.');
                return;
            }

            if (selectedOption.value === questions[currentQuestionIndex].answer) {
                score++;
            }

            currentQuestionIndex++;

            if (currentQuestionIndex < questions.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function showResult() {
            document.getElementById('quizForm').classList.add('hidden');
            document.getElementById('result').textContent = `Your score: ${score} / ${questions.length}`;
            document.getElementById('result').classList.remove('hidden');
            document.getElementById('retakeButton').classList.remove('hidden');
            document.getElementById('backToTestPageButton').classList.remove('hidden');
        }

        // Modify resetQuiz to reshuffle questions on retry
        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            isQuizStarted = false; // Reset quiz state
            shuffleQuestions(); // Reshuffle questions for a new random order
            document.getElementById('quizForm').classList.remove('hidden');
            document.getElementById('result').classList.add('hidden');
            document.getElementById('retakeButton').classList.add('hidden');
            document.getElementById('backToTestPageButton').classList.add('hidden');
            loadQuestion();
        }

        // Initialize the first question
        loadQuestion();
    </script>
</body>
</html>